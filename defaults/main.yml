# General configuration
etcd_version: 3.2.24
etcd_ansible_group: etcd_nodes
etcd_ssl_enabled: yes
etcd_pod_install: no

# Service configuration
etcd_client_listen_ip: "{{ ip }}"
etcd_peer_listen_ip: "{{ ip }}"
etcd_hostname: "{{ ansible_hostname }}"

# Local installation configuration
etcd_archive_checksum: sha256:947849dbcfa13927c81236fb76a7c01d587bbab42ab1e807184cd91b026ebed7
etcd_base_name: etcd-v{{ etcd_version }}-linux-amd64
etcd_archive: "{{ etcd_base_name }}.tar.gz"

# SSL configuration
ca_host: ca
ca_dir: /etc/pki/CA/intermediate
ca_host_cert: "{{ ca_dir }}/certs/intermediate-chain.crt"

etcd_private_key: /etc/etcd/{{ etcd_hostname }}-key.pem
etcd_cert: /etc/etcd/{{ etcd_hostname }}.crt
etcd_ca_cert: /etc/etcd/ca.crt
etcd_cert_country: GB
etcd_cert_city: London
etcd_cert_state: Greater London
etcd_cert_organization_name: Ansible Certificate Authority
etcd_cert_organizational_unit_name: etcd

# Derived configuration
etcd_protocol: "{{ 'https' if etcd_ssl_enabled else 'http' }}"
etcd_single_node: "{{ groups[etcd_ansible_group]|length <= 1 }}"
